---
title: '柯里化'
date: 2018-11-26 14:14:41
tags: javascript
top:
---
### 柯里化
简单讲，**柯里化**是把一个多参函数转换成接受单参的一系列函数。它跟**部分应用**的概念不太一样，部分应用是把一个多参函数“切”一刀，而柯里化是把函数“切”好多刀，直到中间每个函数都是单参的，最后得到的结果就是所谓的**柯里化函数（curried function）**。

### 高阶函数
可以通过高阶函数简单的实现我们上面提到的柯里化。高阶函数就是可以接受另一个函数作为一个参数的函数。和普通的函数只是在传参类型上有差别。
举个🌰：
```
function max(a, b, fn) {
    return fn(a, b)
}
console.log(max(2,3,Math.max))  // 3
```
其实我们经常使用的 map/reduce/filter/sort 等方法其实也是一个高阶函数。
乍一没反应过来？平时我们在使用map时候可能是直接像下面这样写，导致我们忽略了其实map的参数就是一个函数鸭：
```
var arr = [1, 2, 3];
arr.map((item)=>{
    console.log(item)
})
```

### 实现通用curry函数
继续来深入，前面提到的高阶函数只能是我们针对每一个情况具体来编写代码，那我们能不能直接封装一个公共的函数来实现柯里化呢？
扒到大神的三行解决方案：
```
const curry = (fn) => {
    if (fn.length <= 1) return fn;
    const generator = (args, rest) => (!rest ? fn(...args) : arg => generator([...args, arg], rest - 1));
    return generator([], fn.length);
};
```
或者这样：
```
const curry = (fn, arr = []) => (...args) => (
  arg => arg.length === fn.length
    ? fn(...arg)
    : curry(fn, arg)
)([...arr, ...args])
```






