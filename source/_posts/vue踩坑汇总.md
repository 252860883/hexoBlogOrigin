---
title: 总结VUE项目中的踩“坑”之旅
date: 2018-07-10 17:38:44
tags: ['vue','javascript']
---
## Q1: for循环的key有何作用？
做过vue开发的程序猿大大们开始的时候一定经常遇到的问题就是忘加key！忘加key！忘加key！不过好在vscode后来的vue校验做出了红色波浪线警示，但是感觉很是不舒服呀，所以这个key到底有什么用？文档中解释到：
>key 的特殊属性主要用在 Vue 的虚拟 DOM 算法，在新旧 nodes 对比时辨识 VNodes。如果不使用 key，Vue 会使用一种最大限度减少动态元素并且尽可能的尝试修复/再利用相同类型元素的算法。使用 key，它会基于 key 的变化重新排列元素顺序，并且会移除 key 不存在的元素。有相同父元素的子元素必须有独特的 key。重复的 key 会造成渲染错误。

简单来讲，如果有了key，diff算法会直接拿key值来做对比，而没有key的话，只能用其他的办法，在性能上肯定会有更多的损耗。同时注意到最后一句话，有相同父元素的子元素必须有独特的key，所以说如果相同的父元素下，引用了两次相同的子组件，那么这两个组件同样需要加key来作区分，否则可能会造成未知的错误（如果出现未知的错误，可以加key试试）。

相信平时大家有一个偷懒的写法就是直接把index作为key值，但是结合key的实际作用发现，以index作为key的话，是无法进行新旧比较的，所以这个写法可以说是无效的，所以严格来讲最好使用严格的唯一id做为key值。



